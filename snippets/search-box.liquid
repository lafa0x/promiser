
<div class="custom-search">
    <div class="main-filter">

    <form class="filter-form" action="search" autocomplete="off">
        <button type="submit"><img src="{{ 'search-icon.png' | asset_img_url: '' }}
                      //cdn.shopify.com/s/files/1/0000/0001/t/1/assets/search-icon.png?42" /></button>   <div class="search-cancel"  onclick="document.getElementById('searchBox').value = ''">x</div>  <input type="text"  placeholder="Search Bible Promise or Topic" name="search" class="search-a" id="searchBox"> <br>

        <div class="form-switch">
            <label class="switch">
                <input type="checkbox" id="studyMode" name="study">
                <span class="slider round"></span> 
            </label> <span class="filter-type"> Study Mode </span>
        </div>
    </form>
    </div>

 <div class="study-info" id="info-about-btn">
        <span class="info-content">i</span>
    </div>

    
  

</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  
  jQuery(function(){
      jQuery("#custom-search-icon").click(function() {
        jQuery(".custom-search").toggle();
        jQuery(".search-filter").toggle();
        jQuery(".search-a").css("border", "2px solid #79B8BB");
    });
  });
  
  
  // Handle form submit
  document.querySelector('.filter-form').addEventListener('submit', (e) => {
 	e.preventDefault();
    const study = document.getElementById('studyMode');
    const isStudy = study.checked;
    const searchBox = document.getElementById('searchBox');
    let redirect = isStudy ? '/pages/study-mode' : '/search';
   	redirect += '?search=' + searchBox.value;
    window.location.href = redirect;
  });
  
  document.getElementById('studyMode').addEventListener('change', (e) => {
    const searchLinkContainers = document.querySelectorAll('.search-filter-link');
    
    for (const linkContainer of searchLinkContainers) {
      const searchLinks = linkContainer.querySelectorAll('a');
    
      for (const link of searchLinks) {
        const sides = link.href.split('?');
        const page = e.target.checked ? '/pages/study-mode' : '/search';
        link.href = page + '?' + sides[1];
      }
    }
  });
  
  jQuery(function(){
  
  jQuery("#searchBox").keyup(function () {
       if (jQuery(this).val()) {
          jQuery(".search-cancel").show();
       }
       else {
          jQuery(".search-cancel").hide();
       }
    });
    jQuery(".search-cancel").click(function () {
       jQuery("#searchBox").val('');
       jQuery(this).hide();
    });

  });
  
  
  $('#info-about-btn, .study-info').click(function(){
      $('.study-info-about').toggle('slow');
  });
  
  $('.study-infos').click(function(){
      $('.study-info-about').hide('slow');
  }); 
  
  
   jQuery('.ctm-plan').click(function(e) {
    e.preventDefault(); //prevent the link from being followed
    jQuery('.ctm-main-menu').removeClass('ctm-menu-active');
    jQuery('.ctm-plan-menu').addClass('ctm-menu-active');
});
  
  jQuery('.ctm-shop').click(function(e) {
    e.preventDefault(); //prevent the link from being followed
    jQuery('.ctm-main-menu').removeClass('ctm-menu-active');
    jQuery('.ctm-shop-menu').addClass('ctm-menu-active');
});
  
   jQuery('.ctm-shop-menu .ctm-header').click(function(e) {
    e.preventDefault(); //prevent the link from being followed
    jQuery('.ctm-shop-menu').removeClass('ctm-menu-active');
    jQuery('.ctm-main-menu').addClass('ctm-menu-active');
});
  
  jQuery('.ctm-plan-menu .ctm-header').click(function(e) {
    e.preventDefault(); //prevent the link from being followed
    jQuery('.ctm-plan-menu').removeClass('ctm-menu-active');
    jQuery('.ctm-main-menu').addClass('ctm-menu-active');
});
  
  
</script>
